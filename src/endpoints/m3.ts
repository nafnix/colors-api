import {
  OpenAPIRoute,
  OpenAPIRouteSchema,
  Query,
} from "@cloudflare/itty-router-openapi";
import { type Env } from "~/types";
import { m3ThemeFromHex } from "~/utils";

export class M3Colors extends OpenAPIRoute {
  static schema: OpenAPIRouteSchema = {
    tags: ["Colors"],
    summary: "Material Design 3 主题生成",
    parameters: {
      hex: Query(String, {
        description: "16进制颜色",
        example: "#ffffff",
      }),
    },
    responses: {
      "200": {
        description: "JSON 格式的 Material Design 3 主题",
        schema: {
          source: "#ffffff",
          schemes: {
            light: {
              primary: "#006874",
              onPrimary: "#ffffff",
              primaryContainer: "#97f0ff",
              onPrimaryContainer: "#001f24",
              secondary: "#4a6267",
              onSecondary: "#ffffff",
              secondaryContainer: "#cde7ec",
              onSecondaryContainer: "#051f23",
              tertiary: "#525e7d",
              onTertiary: "#ffffff",
              tertiaryContainer: "#dae2ff",
              onTertiaryContainer: "#0e1b37",
              error: "#ba1a1a",
              onError: "#ffffff",
              errorContainer: "#ffdad6",
              onErrorContainer: "#410002",
              background: "#fafdfd",
              onBackground: "#191c1d",
              surface: "#fafdfd",
              onSurface: "#191c1d",
              surfaceVariant: "#dbe4e6",
              onSurfaceVariant: "#3f484a",
              outline: "#6f797a",
              outlineVariant: "#bfc8ca",
              shadow: "#000000",
              scrim: "#000000",
              inverseSurface: "#2e3132",
              inverseOnSurface: "#eff1f1",
              inversePrimary: "#4fd8eb",
            },
            dark: {
              primary: "#4fd8eb",
              onPrimary: "#00363d",
              primaryContainer: "#004f58",
              onPrimaryContainer: "#97f0ff",
              secondary: "#b1cbd0",
              onSecondary: "#1c3438",
              secondaryContainer: "#334b4f",
              onSecondaryContainer: "#cde7ec",
              tertiary: "#bac6ea",
              onTertiary: "#24304d",
              tertiaryContainer: "#3b4664",
              onTertiaryContainer: "#dae2ff",
              error: "#ffb4ab",
              onError: "#690005",
              errorContainer: "#93000a",
              onErrorContainer: "#ffb4ab",
              background: "#191c1d",
              onBackground: "#e1e3e3",
              surface: "#191c1d",
              onSurface: "#e1e3e3",
              surfaceVariant: "#3f484a",
              onSurfaceVariant: "#bfc8ca",
              outline: "#899294",
              outlineVariant: "#3f484a",
              shadow: "#000000",
              scrim: "#000000",
              inverseSurface: "#e1e3e3",
              inverseOnSurface: "#2e3132",
              inversePrimary: "#006874",
            },
          },
          palettes: {
            primary: {
              "0": "#000000",
              "1": "#000506",
              "2": "#00090b",
              "3": "#000d10",
              "4": "#001114",
              "5": "#001417",
              "6": "#00161a",
              "7": "#00191d",
              "8": "#001b1f",
              "9": "#001d21",
              "10": "#001f24",
              "11": "#002226",
              "12": "#002429",
              "13": "#00262b",
              "14": "#00282d",
              "15": "#002b30",
              "16": "#002d32",
              "17": "#002f35",
              "18": "#003138",
              "19": "#00343a",
              "20": "#00363d",
              "21": "#00393f",
              "22": "#003b42",
              "23": "#003d45",
              "24": "#004047",
              "25": "#00424a",
              "26": "#00454d",
              "27": "#00474f",
              "28": "#004a52",
              "29": "#004c55",
              "30": "#004f58",
              "31": "#00515a",
              "32": "#00545d",
              "33": "#005660",
              "34": "#005963",
              "35": "#005b66",
              "36": "#005e68",
              "37": "#00616b",
              "38": "#00636e",
              "39": "#006671",
              "40": "#006874",
              "41": "#006b77",
              "42": "#006e7a",
              "43": "#00707d",
              "44": "#007380",
              "45": "#007682",
              "46": "#007985",
              "47": "#007b88",
              "48": "#007e8b",
              "49": "#00818e",
              "50": "#008391",
              "51": "#008694",
              "52": "#008998",
              "53": "#008c9b",
              "54": "#008f9e",
              "55": "#0091a1",
              "56": "#0094a4",
              "57": "#0097a7",
              "58": "#009aaa",
              "59": "#009dad",
              "60": "#00a0b0",
              "61": "#00a2b3",
              "62": "#00a5b7",
              "63": "#00a8ba",
              "64": "#00abbd",
              "65": "#00aec0",
              "66": "#00b1c3",
              "67": "#07b4c6",
              "68": "#13b6c9",
              "69": "#1cb9cc",
              "70": "#22bccf",
              "71": "#28bfd1",
              "72": "#2ec1d4",
              "73": "#32c4d7",
              "74": "#37c7da",
              "75": "#3bcadd",
              "76": "#40cddf",
              "77": "#44cfe2",
              "78": "#48d2e5",
              "79": "#4bd5e8",
              "80": "#4fd8eb",
              "81": "#53dbee",
              "82": "#56def1",
              "83": "#5ae0f4",
              "84": "#5de3f6",
              "85": "#61e6f9",
              "86": "#64e9fc",
              "87": "#68ecff",
              "88": "#7aedff",
              "89": "#89efff",
              "90": "#97f0ff",
              "91": "#a3f2ff",
              "92": "#aff3ff",
              "93": "#bbf5ff",
              "94": "#c5f6ff",
              "95": "#d0f8ff",
              "96": "#daf9ff",
              "97": "#e3fbff",
              "98": "#edfcff",
              "99": "#f6feff",
              "100": "#ffffff",
            },
            secondary: {
              "0": "#000000",
              "1": "#000506",
              "2": "#00090b",
              "3": "#000d10",
              "4": "#001114",
              "5": "#001417",
              "6": "#00161a",
              "7": "#00191d",
              "8": "#021b1f",
              "9": "#031d21",
              "10": "#051f23",
              "11": "#072125",
              "12": "#092327",
              "13": "#0c2529",
              "14": "#0e272b",
              "15": "#10292d",
              "16": "#132b2f",
              "17": "#152e31",
              "18": "#173034",
              "19": "#1a3236",
              "20": "#1c3438",
              "21": "#1e363a",
              "22": "#20383c",
              "23": "#233b3f",
              "24": "#253d41",
              "25": "#273f43",
              "26": "#294145",
              "27": "#2c4448",
              "28": "#2e464a",
              "29": "#30484c",
              "30": "#334b4f",
              "31": "#354d51",
              "32": "#374f53",
              "33": "#3a5256",
              "34": "#3c5458",
              "35": "#3e565b",
              "36": "#41595d",
              "37": "#435b5f",
              "38": "#455e62",
              "39": "#486064",
              "40": "#4a6267",
              "41": "#4d6569",
              "42": "#4f676c",
              "43": "#516a6e",
              "44": "#546c71",
              "45": "#566f73",
              "46": "#597176",
              "47": "#5b7478",
              "48": "#5e767b",
              "49": "#60797d",
              "50": "#637b80",
              "51": "#657e82",
              "52": "#688085",
              "53": "#6a8387",
              "54": "#6d868a",
              "55": "#6f888d",
              "56": "#728b8f",
              "57": "#748d92",
              "58": "#779094",
              "59": "#799297",
              "60": "#7c959a",
              "61": "#7f989c",
              "62": "#819a9f",
              "63": "#849da2",
              "64": "#86a0a4",
              "65": "#89a2a7",
              "66": "#8ca5aa",
              "67": "#8ea8ac",
              "68": "#91aaaf",
              "69": "#93adb2",
              "70": "#96b0b4",
              "71": "#99b2b7",
              "72": "#9bb5ba",
              "73": "#9eb8bc",
              "74": "#a1bbbf",
              "75": "#a4bdc2",
              "76": "#a6c0c5",
              "77": "#a9c3c8",
              "78": "#acc6ca",
              "79": "#aec8cd",
              "80": "#b1cbd0",
              "81": "#b4ced3",
              "82": "#b7d1d5",
              "83": "#b9d4d8",
              "84": "#bcd6db",
              "85": "#bfd9de",
              "86": "#c2dce1",
              "87": "#c4dfe4",
              "88": "#c7e2e6",
              "89": "#cae4e9",
              "90": "#cde7ec",
              "91": "#d0eaef",
              "92": "#d2edf2",
              "93": "#d5f0f5",
              "94": "#d8f3f7",
              "95": "#dbf6fa",
              "96": "#def8fd",
              "97": "#e3fbff",
              "98": "#edfcff",
              "99": "#f6feff",
              "100": "#ffffff",
            },
            tertiary: {
              "0": "#000000",
              "1": "#000312",
              "2": "#00061d",
              "3": "#000925",
              "4": "#010d29",
              "5": "#030f2c",
              "6": "#05122e",
              "7": "#071430",
              "8": "#091632",
              "9": "#0c1835",
              "10": "#0e1b37",
              "11": "#101d39",
              "12": "#121f3b",
              "13": "#15213d",
              "14": "#17233f",
              "15": "#192541",
              "16": "#1b2744",
              "17": "#1d2946",
              "18": "#202b48",
              "19": "#222d4a",
              "20": "#24304d",
              "21": "#26324f",
              "22": "#283451",
              "23": "#2b3654",
              "24": "#2d3856",
              "25": "#2f3b58",
              "26": "#313d5b",
              "27": "#343f5d",
              "28": "#364160",
              "29": "#384462",
              "30": "#3b4664",
              "31": "#3d4867",
              "32": "#3f4b69",
              "33": "#424d6c",
              "34": "#444f6e",
              "35": "#465271",
              "36": "#495473",
              "37": "#4b5776",
              "38": "#4d5978",
              "39": "#505b7b",
              "40": "#525e7d",
              "41": "#556080",
              "42": "#576383",
              "43": "#596585",
              "44": "#5c6788",
              "45": "#5e6a8a",
              "46": "#616c8d",
              "47": "#636f90",
              "48": "#667192",
              "49": "#687495",
              "50": "#6b7697",
              "51": "#6d799a",
              "52": "#707b9d",
              "53": "#727e9f",
              "54": "#7581a2",
              "55": "#7883a5",
              "56": "#7a86a7",
              "57": "#7d88aa",
              "58": "#7f8bad",
              "59": "#828db0",
              "60": "#8490b2",
              "61": "#8793b5",
              "62": "#8a95b8",
              "63": "#8c98bb",
              "64": "#8f9bbd",
              "65": "#929dc0",
              "66": "#94a0c3",
              "67": "#97a2c6",
              "68": "#9aa5c8",
              "69": "#9ca8cb",
              "70": "#9faace",
              "71": "#a2add1",
              "72": "#a4b0d4",
              "73": "#a7b3d6",
              "74": "#aab5d9",
              "75": "#acb8dc",
              "76": "#afbbdf",
              "77": "#b2bde2",
              "78": "#b5c0e5",
              "79": "#b7c3e7",
              "80": "#bac6ea",
              "81": "#bdc8ed",
              "82": "#c0cbf0",
              "83": "#c2cef3",
              "84": "#c5d1f6",
              "85": "#c8d4f9",
              "86": "#cbd6fc",
              "87": "#ced9ff",
              "88": "#d2dcff",
              "89": "#d6dfff",
              "90": "#dae2ff",
              "91": "#dee5ff",
              "92": "#e2e7ff",
              "93": "#e6eaff",
              "94": "#eaedff",
              "95": "#eef0ff",
              "96": "#f2f3ff",
              "97": "#f6f6ff",
              "98": "#faf8ff",
              "99": "#fefbff",
              "100": "#ffffff",
            },
            neutral: {
              "0": "#000000",
              "1": "#020404",
              "2": "#050808",
              "3": "#080c0c",
              "4": "#0b0f0f",
              "5": "#0e1212",
              "6": "#101415",
              "7": "#131617",
              "8": "#151819",
              "9": "#171a1b",
              "10": "#191c1d",
              "11": "#1b1e1f",
              "12": "#1d2021",
              "13": "#1f2223",
              "14": "#212425",
              "15": "#232627",
              "16": "#252829",
              "17": "#272b2b",
              "18": "#292d2d",
              "19": "#2b2f2f",
              "20": "#2e3132",
              "21": "#303334",
              "22": "#323536",
              "23": "#343838",
              "24": "#363a3a",
              "25": "#393c3d",
              "26": "#3b3e3f",
              "27": "#3d4041",
              "28": "#3f4343",
              "29": "#424546",
              "30": "#444748",
              "31": "#464a4a",
              "32": "#494c4d",
              "33": "#4b4e4f",
              "34": "#4d5151",
              "35": "#505354",
              "36": "#525556",
              "37": "#545858",
              "38": "#575a5b",
              "39": "#595c5d",
              "40": "#5c5f5f",
              "41": "#5e6162",
              "42": "#606464",
              "43": "#636667",
              "44": "#656969",
              "45": "#686b6c",
              "46": "#6a6e6e",
              "47": "#6d7071",
              "48": "#6f7373",
              "49": "#727576",
              "50": "#747878",
              "51": "#777a7b",
              "52": "#797d7d",
              "53": "#7c7f80",
              "54": "#7f8282",
              "55": "#818485",
              "56": "#848787",
              "57": "#86898a",
              "58": "#898c8c",
              "59": "#8c8f8f",
              "60": "#8e9192",
              "61": "#919494",
              "62": "#939697",
              "63": "#96999a",
              "64": "#999c9c",
              "65": "#9b9e9f",
              "66": "#9ea1a1",
              "67": "#a1a4a4",
              "68": "#a3a6a7",
              "69": "#a6a9a9",
              "70": "#a9acac",
              "71": "#acaeaf",
              "72": "#aeb1b1",
              "73": "#b1b4b4",
              "74": "#b4b6b7",
              "75": "#b6b9ba",
              "76": "#b9bcbc",
              "77": "#bcbfbf",
              "78": "#bfc1c2",
              "79": "#c2c4c5",
              "80": "#c4c7c7",
              "81": "#c7caca",
              "82": "#cacccd",
              "83": "#cdcfd0",
              "84": "#d0d2d2",
              "85": "#d2d5d5",
              "86": "#d5d8d8",
              "87": "#d8dadb",
              "88": "#dbddde",
              "89": "#dee0e0",
              "90": "#e1e3e3",
              "91": "#e3e6e6",
              "92": "#e6e8e9",
              "93": "#e9ebec",
              "94": "#eceeef",
              "95": "#eff1f1",
              "96": "#f2f4f4",
              "97": "#f5f7f7",
              "98": "#f8fafa",
              "99": "#fafdfd",
              "100": "#ffffff",
            },
            neutralVariant: {
              "0": "#000000",
              "1": "#000405",
              "2": "#02090a",
              "3": "#050c0e",
              "4": "#071011",
              "5": "#091214",
              "6": "#0c1516",
              "7": "#0e1719",
              "8": "#10191b",
              "9": "#121b1d",
              "10": "#141d1f",
              "11": "#161f21",
              "12": "#182123",
              "13": "#1a2325",
              "14": "#1c2527",
              "15": "#1e2729",
              "16": "#20292b",
              "17": "#222b2d",
              "18": "#252e2f",
              "19": "#273031",
              "20": "#293234",
              "21": "#2b3436",
              "22": "#2d3638",
              "23": "#2f393a",
              "24": "#323b3c",
              "25": "#343d3f",
              "26": "#363f41",
              "27": "#384143",
              "28": "#3b4445",
              "29": "#3d4648",
              "30": "#3f484a",
              "31": "#414b4c",
              "32": "#444d4f",
              "33": "#464f51",
              "34": "#485253",
              "35": "#4b5456",
              "36": "#4d5658",
              "37": "#4f595a",
              "38": "#525b5d",
              "39": "#545e5f",
              "40": "#576062",
              "41": "#596264",
              "42": "#5b6567",
              "43": "#5e6769",
              "44": "#606a6c",
              "45": "#636c6e",
              "46": "#656f70",
              "47": "#687173",
              "48": "#6a7475",
              "49": "#6d7678",
              "50": "#6f797a",
              "51": "#727b7d",
              "52": "#747e80",
              "53": "#778082",
              "54": "#798385",
              "55": "#7c8587",
              "56": "#7e888a",
              "57": "#818b8c",
              "58": "#848d8f",
              "59": "#869092",
              "60": "#899294",
              "61": "#8b9597",
              "62": "#8e9899",
              "63": "#919a9c",
              "64": "#939d9f",
              "65": "#96a0a1",
              "66": "#99a2a4",
              "67": "#9ba5a7",
              "68": "#9ea8a9",
              "69": "#a1aaac",
              "70": "#a3adaf",
              "71": "#a6b0b1",
              "72": "#a9b2b4",
              "73": "#abb5b7",
              "74": "#aeb8ba",
              "75": "#b1babc",
              "76": "#b4bdbf",
              "77": "#b6c0c2",
              "78": "#b9c3c4",
              "79": "#bcc5c7",
              "80": "#bfc8ca",
              "81": "#c1cbcd",
              "82": "#c4ced0",
              "83": "#c7d1d2",
              "84": "#cad3d5",
              "85": "#ccd6d8",
              "86": "#cfd9db",
              "87": "#d2dcde",
              "88": "#d5dfe0",
              "89": "#d8e1e3",
              "90": "#dbe4e6",
              "91": "#dde7e9",
              "92": "#e0eaec",
              "93": "#e3edef",
              "94": "#e6f0f1",
              "95": "#e9f2f4",
              "96": "#ecf5f7",
              "97": "#eff8fa",
              "98": "#f2fbfd",
              "99": "#f6feff",
              "100": "#ffffff",
            },
            error: {
              "0": "#000000",
              "1": "#100000",
              "2": "#1a0000",
              "3": "#210001",
              "4": "#280001",
              "5": "#2d0001",
              "6": "#310001",
              "7": "#360001",
              "8": "#390001",
              "9": "#3d0002",
              "10": "#410002",
              "11": "#450002",
              "12": "#490002",
              "13": "#4d0002",
              "14": "#500003",
              "15": "#540003",
              "16": "#580003",
              "17": "#5c0004",
              "18": "#600004",
              "19": "#640004",
              "20": "#690005",
              "21": "#6d0005",
              "22": "#710005",
              "23": "#750006",
              "24": "#790006",
              "25": "#7e0007",
              "26": "#820007",
              "27": "#860008",
              "28": "#8a0008",
              "29": "#8f0009",
              "30": "#93000a",
              "31": "#98000a",
              "32": "#9c000b",
              "33": "#a0000c",
              "34": "#a4020d",
              "35": "#a80710",
              "36": "#ac0c12",
              "37": "#af1014",
              "38": "#b31416",
              "39": "#b61718",
              "40": "#ba1a1a",
              "41": "#bd1e1d",
              "42": "#c1211f",
              "43": "#c52421",
              "44": "#c82623",
              "45": "#cc2925",
              "46": "#cf2c27",
              "47": "#d32f29",
              "48": "#d7322c",
              "49": "#da342e",
              "50": "#de3730",
              "51": "#e13a32",
              "52": "#e53c34",
              "53": "#e93f36",
              "54": "#ec4139",
              "55": "#f0443b",
              "56": "#f3473d",
              "57": "#f7493f",
              "58": "#fb4c42",
              "59": "#fe4e44",
              "60": "#ff5449",
              "61": "#ff5b4f",
              "62": "#ff6154",
              "63": "#ff665a",
              "64": "#ff6c5f",
              "65": "#ff7164",
              "66": "#ff7669",
              "67": "#ff7b6e",
              "68": "#ff8073",
              "69": "#ff8578",
              "70": "#ff897d",
              "71": "#ff8e82",
              "72": "#ff9286",
              "73": "#ff978b",
              "74": "#ff9b90",
              "75": "#ff9f94",
              "76": "#ffa399",
              "77": "#ffa89d",
              "78": "#ffaca2",
              "79": "#ffb0a6",
              "80": "#ffb4ab",
              "81": "#ffb8af",
              "82": "#ffbcb3",
              "83": "#ffbfb8",
              "84": "#ffc3bc",
              "85": "#ffc7c0",
              "86": "#ffcbc5",
              "87": "#ffcfc9",
              "88": "#ffd3cd",
              "89": "#ffd6d1",
              "90": "#ffdad6",
              "91": "#ffdeda",
              "92": "#ffe2de",
              "93": "#ffe5e2",
              "94": "#ffe9e6",
              "95": "#ffedea",
              "96": "#fff0ee",
              "97": "#fff4f2",
              "98": "#fff8f7",
              "99": "#fffbff",
              "100": "#ffffff",
            },
          },
        },
      },
    },
  };

  async handle(
    request: Request,
    env: Env,
    context: any,
    data: Record<"query", { hex: string; type: "css" | "tailwindcss" }>
  ) {
    const { hex } = data.query;

    const result = m3ThemeFromHex(hex);

    return result;
  }
}
